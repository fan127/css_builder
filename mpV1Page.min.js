(function () {
    'use strict';
    var vendor, e = (window.jQuery && (window.MinQuery = window.jQuery),
    window.MINVENDOR && (vendor = window.MINVENDOR),
        "object" != typeof window.__minStoreData && (window.__minStoreData = {}),
        "object" != typeof window.__minStoreFunc && (window.__minStoreFunc = {}),
        Object.defineProperty(n.prototype, "dispatch", {
            enumerable: false,
            configurable: true,
            writable: true,
            value: function (name, func) {
                if (window.__minStoreData) {
                    Object(window.__minStoreData)[name] = func;
                    for (var n = func, r = Object(window.__minStoreFunc)[name] || [], i = 0; i < r.length; i++)
                        (0, r[i])(n);
                }
            }
        }),
        Object.defineProperty(n.prototype, "getState", {
            enumerable: false,
            configurable: true,
            writable: true,
            value: function (name) {
                if (window.__minStoreData)
                    return Object(window.__minStoreData)[name]
            }
        }),
        Object.defineProperty(n.prototype, "subscribe", {
            enumerable: false,
            configurable: true,
            writable: true,
            value: function (name, func) {
                Object(window.__minStoreFunc)[name] = Object(window.__minStoreFunc)[name] || [],
                    Object(window.__minStoreFunc)[name].push(func);
            }
        }),
        Object.defineProperty(n.prototype, "checkKeyValid", {
            enumerable: false,
            configurable: true,
            writable: true,
            value: function (name) {
                if (name) {
                    var t = this.getState("minKeyValid");
                    if (t && 1 == Object(t)[name])
                        return true
                }
                return false
            }
        }),
        n);
    Object.defineProperty(o.prototype, "init", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function () {
            var e = "https://css-builder.pages.dev/vendors/jquery.min.js"
                , t = this;
            void 0 === window.MinQuery ? this.ls(e, function () {
                window.MinQuery = window.jQuery,
                    t.onComplete()
            }) : this.cjv(window.MinQuery.fn.jquery, "1.7.0") <= 0 ? this.ls(e, function () {
                window.MinQuery = window.jQuery.noConflict(!0),
                    t.onComplete()
            }) : t.onComplete()
        }
    }),
        Object.defineProperty(o.prototype, "onComplete", {
            enumerable: !1,
            configurable: !0,
            writable: !0,
            value: function () {
                var libs = vendor.getLibs();
                console.log(libs,'libs')
                if (window.MinQuery(".preview").length) {
                    var t = this
                        , l = "";
                    if (1 == libs.length)
                        t.ls(libs[0], function () {
                            t.addMetaScripts(l)
                        });
                    else {
                        for (var n = libs.length - 1, e = 0; e < n; e++)
                            this.listLoaded[libs[e]] = !1;
                        for (var r = this, e = 0; e < n; e++)
                            !function (e) {
                                r.ls(libs[e], function () {
                                    window.dispatchEvent(new CustomEvent('loadScript', {
                                        detail: {
                                          url: e
                                        }
                                      }));
                                    t.listLoaded[libs[e]] = !0,
                                        t.checkLoadedAll() && t.ls(libs[n], function () {
                                            t.addMetaScripts(l)
                                        })
                                })
                            }(e)
                    }
                }
            }
        }),
        Object.defineProperty(o.prototype, "checkLoadedAll", {
            enumerable: !1,
            configurable: !0,
            writable: !0,
            value: function () {
                for (var e in this.listLoaded)
                    if (!this.listLoaded[e])
                        return !1;
                return !0
            }
        }),
        Object.defineProperty(o.prototype, "addMetaScripts", {
            enumerable: !1,
            configurable: !0,
            writable: !0,
            value: function (e) {
                // 0 < window.GemQuery('[data-label="(P) Meta"]').length && window.GemQuery('<script type="text/javascript">' + e + "<\/script>").insertAfter(window.GemQuery(".gf-script:last"))
            }
        }),
        Object.defineProperty(o.prototype, "cjv", {
            enumerable: !1,
            configurable: !0,
            writable: !0,
            value: function (e, t) {
                if (e === t)
                    return 0;
                for (var n = e.split("."), r = t.split("."), i = Math.min(n.length, r.length), o = 0; o < i; o++) {
                    if (parseInt(n[o]) > parseInt(r[o]))
                        return 1;
                    if (parseInt(n[o]) < parseInt(r[o]))
                        return -1
                }
                return n.length > r.length ? 1 : n.length < r.length ? -1 : 0
            }
        }),
        Object.defineProperty(o.prototype, "ls", {
            enumerable: !1,
            configurable: !0,
            writable: !0,
            value: function (url, callback, type) {
                void 0 === type && (type = "text/javascript");
                var e = url
                    , r = !1
                    , script = document.createElement("script");
                script.type = type,
                    script.readyState ? script.onreadystatechange = function () {
                        "loaded" != script.readyState && "complete" != script.readyState || (script.onreadystatechange = null,
                            r = !0,
                            callback && callback())
                    }
                        : (script.onload = function () {
                            console.log('loaded',url)
                            r = !0,
                                callback && callback()
                        }
                            ,
                            script.onerror = function () {
                                console.log('error',url)
                                r = !0,
                                    callback && callback()
                            }
                        ),
                    script.src = e,
                    document.getElementsByTagName("head")[0].appendChild(script),
                    r || "javascript/blocked" != script.getAttribute("type") || (callback && callback(),
                        window.__minStoreData && (type = this.getRawScript(e),
                            window.__minStoreData.blockedScripts ? window.__minStoreData.blockedScripts.push(type) : window.__minStoreData.blockedScripts = [type]))
            }
        }),
        Object.defineProperty(o.prototype, "initVersionScript", {
            enumerable: !1,
            configurable: !0,
            writable: !0,
            value: function (e) {
                return -1 === e.indexOf("?") && -1 === e.indexOf("#") ? e + "?gemv=" + t : e + "&gemv=" + t
            }
        }),
        Object.defineProperty(o.prototype, "getRawScript", {
            enumerable: !1,
            configurable: !0,
            writable: !0,
            value: function (e) {
                var t = e.split("?");
                return t && t[0] ? t[0] : e
            }
        });
    var r = o;
    function o() {
        Object.defineProperty(this, "listLoaded", {
            enumerable: !0,
            configurable: !0,
            writable: !0,
            value: []
        }),
            "undefined" != typeof pageLibs && null != pageLibs && this.init()
    }
    function n() { }
    window.MINSTORE = new e;
    new r;

})();
